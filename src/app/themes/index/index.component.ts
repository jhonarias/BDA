import { Component, OnInit } from '@angular/core';
import { ThemeService } from "../theme-service.service";

@Component({
  selector: 'app-index',
  templateUrl: './index.component.html',
  styleUrls: ['./index.component.css']
})
export class IndexComponent implements OnInit {

  getStatus = ["Inactivo","Activo"];
  getColor = ["warn","primary"];

  constructor(private themeService:ThemeService) { }

  ngOnInit() {
    this.getThemesBooks();
  }

  getThemesBooks() {
    this.themeService.loadThemes().then((theme) => {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
      let respuesta = JSON.parse(theme['_body']);           
      this.themeService.themeList = respuesta;      
    }).catch((err) => {
      console.log(err);
    }); 
  }

  changeStatus(theme_id, i) {    
    this.themeService.changeStatusTheme(theme_id).then((theme) => {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
      let respuesta = JSON.parse(theme['_body']);      
      this.themeService.themeList[i] = respuesta;      
    }).catch((err) => {
      console.log(err);
    }); 
  }

}
